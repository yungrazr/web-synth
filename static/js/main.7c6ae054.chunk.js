(this["webpackJsonpweb-synth"]=this["webpackJsonpweb-synth"]||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},28:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(14),o=n.n(i),s=(n(23),n(3)),r=(n(24),n(17)),l=function e(){Object(r.a)(this,e)};l.context=new(window.AudioContext||window.webkitAudioContext),l.masterGainNode=l.context.createGain(),l.filterGainNode=l.context.createGain();var u=l,d=n(5),j=n(16),b=(n(9),n(4)),m=n(0),f=function(e){var t=e.oscNum,n=e.play,a=Object(c.useState)([]),i=Object(s.a)(a,2),o=i[0],r=i[1];Object(c.useEffect)((function(){var e=[],t=function(){var t=u.context.createGain();t.gain.setValueAtTime(.3,u.context.currentTime),t.connect(u.filterGainNode);var n=u.context.createOscillator();n.frequency.setValueAtTime(262,u.context.currentTime),n.detune.setValueAtTime(0,u.context.currentTime),n.start();var c={note:null,playing:!1,oscillatorNode:n,oscillatorGainNode:t,frequency:n.frequency.value,detune:n.detune.value,type:n.type,gain:30};e.push(c)};t(),t(),t(),t(),t(),t(),r(e)}),[]),Object(c.useEffect)((function(){if(void 0===o||0===o.length);else if(n){if(null!=n.playNote&&null==n.stopNote)return void function(e,t){var n=Object(j.a)(o);for(var c in n){var a=Object(d.a)({},n[c]);if(null==a.note){a.playing=!0,a.note=t,a.frequency=e,a.oscillatorNode.frequency.setValueAtTime(e,u.context.currentTime);try{a.oscillatorNode.connect(a.oscillatorGainNode),n[c]=a}catch(i){console.log("Playing Osc"+i)}break}}r(Object(j.a)(n))}(n.frequency,n.playNote);null!=n.stopNote&&null==n.playNote&&function(e){for(var t in o){var n=o;if(n[t].note===e){n[t].note=null,n[t].playing=!1;try{o[t].oscillatorNode.disconnect(o[t].oscillatorGainNode),r(n)}catch(c){console.log("Stopped osc"+c)}break}}}(n.stopNote)}}),[n]);return void 0===o||0===o.length?null:Object(m.jsxs)("div",{className:"oscillator-container",children:[Object(m.jsxs)("h1",{className:"oscillator-title",children:["OSC ",t]}),Object(m.jsxs)("div",{className:"oscillator-knob-container",children:[Object(m.jsx)("h3",{className:"oscillator-title-small",children:"TUNE"}),Object(m.jsx)(b.Knob,{onChange:function(e){var t=[];for(var n in o){var c=o[n];c.oscillatorNode.detune.setValueAtTime(e,u.context.currentTime),c.detune=e,t.push(c)}r(t)},unlockDistance:10,min:-500,max:500,preciseMode:!0,rotateDegrees:180,value:o[0].detune}),Object(m.jsxs)("p",{children:[Math.round(o[0].detune)," cent"]})]}),Object(m.jsxs)("div",{className:"oscillator-knob-container",children:[Object(m.jsx)("h3",{className:"oscillator-title-small",children:"TYPE"}),Object(m.jsx)(b.Knob,{onChange:function(e){var t=Math.round(e),n=[];for(var c in o){var a=o[c];switch(t){case 1:a.oscillatorNode.type="sine",a.type="sine";break;case 2:a.oscillatorNode.type="sawtooth",a.type="sawtooth";break;case 3:a.oscillatorNode.type="square",a.type="square";break;case 4:a.oscillatorNode.type="triangle",a.type="triangle";break;default:a.oscillatorNode.type="sine",a.type="sine"}n.push(a)}r(n)},unlockDistance:10,preciseMode:!0,min:1,max:5,rotateDegrees:180,value:function(){switch(o[0].type){case"sine":return 1;case"sawtooth":return 2;case"square":return 3;case"triangle":return 4;default:return 1}}()}),Object(m.jsx)("p",{children:o[0].type})]}),Object(m.jsxs)("div",{className:"oscillator-knob-container",children:[Object(m.jsx)("h3",{className:"oscillator-title-small",children:"MIX"}),Object(m.jsx)(b.Knob,{onChange:function(e){var t=[];for(var n in o){var c=o[n];c.oscillatorGainNode.gain.setValueAtTime(Math.round(e)/100,u.context.currentTime),c.gain=Math.round(e),t.push(c)}r(t)},unlockDistance:10,min:0,max:100,preciseMode:!0,rotateDegrees:225,value:o[0].gain}),Object(m.jsx)("p",{children:Math.round(o[0].gain)})]})]})},O=function(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(),o=Object(s.a)(i,2),r=o[0],l=o[1],j=Object(c.useState)(),f=Object(s.a)(j,2),O=f[0],h=f[1],x=Object(c.useState)(!1),N=Object(s.a)(x,2),y=N[0],v=N[1];Object(c.useEffect)((function(){!function(){var e=u.context.createDelay();e.delayTime.setValueAtTime(.15,u.context.currentTime);var t=u.context.createGain();t.gain.setValueAtTime(.6,u.context.currentTime);var n=u.context.createBiquadFilter();n.frequency.setValueAtTime(1e3,u.context.currentTime),e.connect(t),t.connect(n),n.connect(e),u.masterGainNode.connect(e);var c={frequency:1e3,filterNode:n},i={gain:.6,feedbackNode:t};a({delayTime:.15,delayNode:e}),l(i),h(c)}()}),[]);return n&&O&&r?Object(m.jsxs)("div",{className:"oscillator-container",children:[Object(m.jsx)("h1",{className:"oscillator-title",children:"DELAY"}),Object(m.jsxs)("div",{className:"oscillator-knob-container",children:[Object(m.jsx)("h3",{className:"oscillator-title-small",children:"TIME"}),Object(m.jsx)(b.Knob,{onChange:function(e){var t=Object(d.a)({},n);t.delayNode.delayTime.setValueAtTime(e,u.context.currentTime),t.delayTime=e,a(t)},unlockDistance:10,min:0,max:1,preciseMode:!0,rotateDegrees:180,value:n.delayTime}),Object(m.jsxs)("p",{children:[n.delayTime.toFixed(2),"sec"]})]}),Object(m.jsxs)("div",{className:"oscillator-knob-container",children:[Object(m.jsx)("h3",{className:"oscillator-title-small",children:"FEEDBACK"}),Object(m.jsx)(b.Knob,{onChange:function(e){var t=Object(d.a)({},r);t.gain=e,t.feedbackNode.gain.setValueAtTime(e,u.context.currentTime),l(t)},unlockDistance:10,min:0,max:.95,preciseMode:!0,rotateDegrees:180,value:r.gain}),Object(m.jsx)("p",{children:r.gain.toFixed(2)})]}),Object(m.jsxs)("div",{className:"oscillator-knob-container",children:[Object(m.jsx)("h3",{className:"oscillator-title-small",children:"CUTOFF"}),Object(m.jsx)(b.Knob,{onChange:function(e){var t=Object(d.a)({},O);t.frequency=e,t.filterNode.frequency.setValueAtTime(e,u.context.currentTime),h(t)},unlockDistance:10,preciseMode:!0,min:0,max:4e3,rotateDegrees:180,value:O.frequency}),Object(m.jsxs)("p",{children:[Math.round(O.frequency),"hz"]})]}),Object(m.jsx)("h3",{style:{cursor:"pointer"},className:"oscillator-title-small",onClick:function(){y?(v(!1),n.delayNode.disconnect(u.context.destination)):(v(!0),n.delayNode.connect(u.context.destination))},children:y?"Turn Off":"Turn On"})]}):null},h=function(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1];Object(c.useEffect)((function(){!function(){var e=u.context.createBiquadFilter();u.filterGainNode.gain.setValueAtTime(.5,u.context.currentTime),e.frequency.value=1e3,e.type="lowpass",e.Q.value=1,u.filterGainNode.connect(e),e.connect(u.masterGainNode);var t={frequency:e.frequency.value,type:e.type,Q:e.Q.value,filterNode:e};a(t)}()}),[]);return void 0===n?null:Object(m.jsxs)("div",{className:"oscillator-container",children:[Object(m.jsx)("h1",{className:"oscillator-title",children:"FILTER"}),Object(m.jsxs)("div",{className:"oscillator-knob-container",children:[Object(m.jsx)("h3",{className:"oscillator-title-small",children:"CUTOFF"}),Object(m.jsx)(b.Knob,{onChange:function(e){var t=Object(d.a)({},n);t.filterNode.frequency.value=e,t.frequency=e,a(t)},unlockDistance:10,min:0,max:4e3,preciseMode:!0,rotateDegrees:180,value:n.frequency}),Object(m.jsxs)("p",{children:[Math.round(n.frequency),"hz"]})]}),Object(m.jsxs)("div",{className:"oscillator-knob-container",children:[Object(m.jsx)("h3",{className:"oscillator-title-small",children:"RES"}),Object(m.jsx)(b.Knob,{onChange:function(e){console.log(n);var t=Object(d.a)({},n);t.filterNode.Q.value=e,t.Q=e,a(t)},unlockDistance:10,min:.01,max:15,preciseMode:!0,rotateDegrees:180,value:n.Q}),Object(m.jsx)("p",{children:n.Q.toFixed(2)})]}),Object(m.jsxs)("div",{className:"oscillator-knob-container",children:[Object(m.jsx)("h3",{className:"oscillator-title-small",children:"TYPE"}),Object(m.jsx)(b.Knob,{onChange:function(e){var t=Math.round(e),c=Object(d.a)({},n);switch(t){case 1:c.filterNode.type="lowpass",c.type="lowpass";break;case 2:c.filterNode.type="highpass",c.type="highpass";break;case 3:c.filterNode.type="bandpass",c.type="bandpass";break;default:c.filterNode.type="lowpass",c.type="lowpass"}a(c)},unlockDistance:10,preciseMode:!0,min:1,max:4,rotateDegrees:180,value:function(){switch(n.type){case"lowpass":return 1;case"highpass":return 2;case"bandpass":return 3;default:return 1}}()}),Object(m.jsx)("p",{children:n.type})]})]})},x=function(){var e=n(26),t=Object(c.useState)(),a=Object(s.a)(t,2),i=a[0],o=a[1],r=Object(c.useState)(!1),l=Object(s.a)(r,2),j=l[0],f=l[1];Object(c.useEffect)((function(){!function(){var t=e(u.context);t.time=3,t.wet.value=.5,t.dry.value=0,t.filterType="highpass",t.cutoff.value=200,t.connect(u.masterGainNode);var n={decay:t.time,wet:t.wet.value,dry:t.dry.value,reverbNode:t};o(n)}()}),[]);return void 0===i?null:Object(m.jsxs)("div",{className:"oscillator-container",children:[Object(m.jsx)("h1",{className:"oscillator-title",children:"REVERB"}),Object(m.jsxs)("div",{className:"oscillator-knob-container",children:[Object(m.jsx)("h3",{className:"oscillator-title-small",children:"DECAY"}),Object(m.jsx)(b.Knob,{onChange:function(e){var t=Object(d.a)({},i);t.reverbNode.time=e,t.decay=e,o(t)},unlockDistance:10,min:0,max:10,preciseMode:!0,rotateDegrees:220,value:i.decay}),Object(m.jsxs)("p",{children:[Math.round(i.decay),"sec"]})]}),Object(m.jsxs)("div",{className:"oscillator-knob-container",children:[Object(m.jsx)("h3",{className:"oscillator-title-small",children:"WET"}),Object(m.jsx)(b.Knob,{onChange:function(e){var t=Object(d.a)({},i);t.reverbNode.wet.value=e,t.wet=e,o(t)},unlockDistance:10,min:0,max:1,preciseMode:!0,rotateDegrees:220,value:i.wet}),Object(m.jsx)("p",{children:i.wet.toFixed(2)})]}),Object(m.jsx)("h3",{style:{cursor:"pointer"},className:"oscillator-title-small",onClick:function(){j?(f(!1),i.reverbNode.disconnect(u.context.destination)):(f(!0),i.reverbNode.connect(u.context.destination))},children:j?"Turn Off":"Turn On"})]})},N=n(18),y=(n(28),function(e){var t=e.audioData,n=Object(c.useRef)(null);return Object(c.useEffect)((function(){!function(){var e=n.current,c=e.height,a=e.width,i=e.getContext("2d"),o=0,s=1*a/t.length;i.lineWidth=2,i.strokeStyle="#ffffff",i.clearRect(0,0,a,c),i.beginPath(),i.moveTo(0,c/2);var r,l=Object(N.a)(t);try{for(l.s();!(r=l.n()).done;){var u=r.value/255*c;i.lineTo(o,u),o+=s}}catch(d){l.e(d)}finally{l.f()}i.lineTo(o,c/2),i.stroke()}()}),[t]),Object(m.jsx)("canvas",{className:"visualiser",width:"500px",height:"500px",ref:n})}),v=function(){var e,t=Object(c.useState)(new Uint8Array(0)),n=Object(s.a)(t,2),a=n[0],i=n[1];function o(){var t=e.frequencyBinCount,n=new Uint8Array(t);e.getByteTimeDomainData(n),i(n);requestAnimationFrame(o)}return Object(c.useEffect)((function(){!function(){e=u.context.createAnalyser(),u.masterGainNode.connect(e),e.fftSize=2048;var t=e.frequencyBinCount,n=new Uint8Array(t);e.getByteTimeDomainData(n)}()}),[]),Object(c.useEffect)((function(){void 0!==e&&o()}),[a]),Object(m.jsx)(y,{audioData:a})},p=n(6),g=n.n(p),k=function(e){var t=e.setPlayNote,n=e.onKeyDown,a=Object(c.useState)([]),i=Object(s.a)(a,2),o=i[0],r=i[1],l=Object(c.useState)(null),u=Object(s.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)(null),f=Object(s.a)(b,2),O=f[0],h=f[1],x=Object(c.useState)(null),N=Object(s.a)(x,2),y=N[0],v=N[1];Object(c.useEffect)((function(){return g.a.enable((function(e){e?j(e):(console.log("WebMidi enabled!"),g.a.addListener("connected",p),g.a.addListener("disconnected",p))})),function(){g.a.removeListener("connected",p),g.a.removeListener("disconnected",p)}}),[]),Object(c.useEffect)((function(){r(g.a.inputs)}),[y]);var p=Object(c.useCallback)((function(e){"input"===e.port.type&&v(e)}),[]),k=Object(c.useCallback)((function(e){n(e.note.number)}),[]),T=Object(c.useCallback)((function(e){t({stopNote:e.note.number,playNote:null})}),[]);return null!=d?Object(m.jsx)("p",{children:"MIDI Disabled"}):o.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"MIDI Input:"}),Object(m.jsxs)("select",{className:"midiDeviceSelect",onChange:function(e){if("disable"===e.target.value){var t=O;t.removeListener("noteon","all",k),t.removeListener("noteoff","all",T),h(null)}else{if(null!=O){var n=O;n.removeListener("noteon","all",k),n.removeListener("noteoff","all",T)}var c=o[parseInt(e.target.value)];c.addListener("noteon","all",k),c.addListener("noteoff","all",T),h(c)}},name:"midiDeviceSelect",id:"midiDeviceSelect",children:[Object(m.jsx)("option",{value:"disable",children:"Turn Off"}),o.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e.name},e)}))]})]}):Object(m.jsx)("p",{children:"No MIDI Devices connected"})},T=function(e){var t=e.masterGainValue,n=e.setMasterGainValue;return Object(m.jsxs)("div",{className:"master-volume-container",children:[Object(m.jsx)("h1",{className:"oscillator-title",children:"MASTER VOL"}),Object(m.jsx)(b.Knob,{onChange:function(e){n(Math.round(e)/100),u.masterGainNode.gain.setValueAtTime(Math.round(e)/100,u.context.currentTime)},unlockDistance:10,preciseMode:!0,min:0,max:100,rotateDegrees:225,value:100*t}),Object(m.jsx)("p",{children:Math.round(100*t)})]})},D=[{key:"z",midiNumber:48},{key:"s",midiNumber:49},{key:"x",midiNumber:50},{key:"d",midiNumber:51},{key:"c",midiNumber:52},{key:"v",midiNumber:53},{key:"g",midiNumber:54},{key:"b",midiNumber:55},{key:"h",midiNumber:56},{key:"n",midiNumber:57},{key:"j",midiNumber:58},{key:"m",midiNumber:59},{key:"q",midiNumber:60},{key:"2",midiNumber:61},{key:"w",midiNumber:62},{key:"3",midiNumber:63},{key:"e",midiNumber:64},{key:"r",midiNumber:65},{key:"5",midiNumber:66},{key:"t",midiNumber:67},{key:"6",midiNumber:68},{key:"y",midiNumber:69},{key:"7",midiNumber:70},{key:"u",midiNumber:71},{key:"i",midiNumber:72}],w=new Map([[12,16.35],[13,17.32],[14,18.35],[15,19.45],[16,20.6],[17,21.83],[18,23.12],[19,24.5],[20,25.96],[21,27.5],[22,29.14],[23,30.87],[24,32.7],[25,34.65],[26,36.71],[27,38.89],[28,41.2],[29,43.65],[30,46.25],[31,49],[32,51.91],[33,55],[34,58.27],[35,61.74],[36,65.41],[37,69.3],[38,73.42],[39,77.78],[40,82.41],[41,87.31],[42,92.5],[43,98],[44,103.83],[45,110],[46,116.54],[47,123.47],[48,130.8],[49,138.6],[50,146.8],[51,155.6],[52,164.8],[53,174.61],[54,185],[55,196],[56,207.65],[57,220],[58,233.08],[59,246.9],[60,262],[61,277.2],[62,293.7],[63,311.2],[64,329.7],[65,349.3],[66,370.1],[67,392.1],[68,415.4],[69,440],[70,466.1],[71,493.88],[72,523.25],[73,554.37],[74,587.33],[75,622.25],[76,659.26],[77,698.46],[78,739.99],[79,783.99],[80,830.61],[81,880],[82,932.33],[83,987.77],[84,1046.5],[85,1108.73],[86,1174.66],[87,1244.51],[88,1318.51],[89,1396.91],[90,1479.98],[91,1567.98],[92,1661.22],[93,1760],[94,1864.66],[95,1975.53],[96,2093],[97,2217.46],[98,2349.32],[99,2489.02],[100,2637.02],[101,2793.83],[102,2959.96],[103,3135.96],[104,3322.44],[105,3520],[106,3729.31],[107,3951.07],[108,4186.01]]),M=n(10),C=(n(32),n(33),function(e){var t=e.onKeyDown,n=e.setPlayNote,c=M.a.fromNote("c3"),a=M.a.fromNote("c5");return Object(m.jsx)("div",{className:"piano-container",children:Object(m.jsx)(M.b,{noteRange:{first:c,last:a},playNote:function(e){t(e)},stopNote:function(e){n({stopNote:e,playNote:null})},keyboardShortcuts:D})})}),q=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(.5),o=Object(s.a)(i,2),r=o[0],l=o[1],d=Object(c.useState)({playNote:null,stopNote:null}),j=Object(s.a)(d,2),b=j[0],N=j[1],y=function(e){N({playNote:e,frequency:w.get(e),stopNote:null})};return!1===n?Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)("div",{className:"splash-screen",children:[Object(m.jsx)("h1",{children:"Web.Synth"}),Object(m.jsx)("p",{style:{cursor:"pointer"},onClick:function(){return a(!0),u.masterGainNode.connect(u.context.destination),void u.masterGainNode.gain.setValueAtTime(.5,u.context.currentTime)},children:"Click here to start"})]})}):Object(m.jsxs)("div",{className:"Main",children:[Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)("p",{children:"Web.Synth v1.0"}),Object(m.jsx)("div",{className:"header-item-container",children:Object(m.jsx)(k,{onKeyDown:y,setPlayNote:N})})]}),Object(m.jsxs)("div",{className:"top-row",children:[Object(m.jsx)(f,{oscNum:1,play:b}),Object(m.jsx)(f,{oscNum:2,play:b}),Object(m.jsx)(f,{oscNum:3,play:b}),Object(m.jsx)(h,{}),Object(m.jsx)(O,{}),Object(m.jsx)(x,{}),Object(m.jsx)(T,{masterGainValue:r,setMasterGainValue:l})]}),Object(m.jsxs)("div",{className:"bottom-row",children:[Object(m.jsx)(C,{setPlayNote:N,onKeyDown:y}),Object(m.jsx)(v,{})]})]})};o.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(q,{})}),document.getElementById("root"))},9:function(e,t,n){}},[[34,1,2]]]);
//# sourceMappingURL=main.7c6ae054.chunk.js.map